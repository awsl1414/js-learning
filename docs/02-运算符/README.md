# æ¨¡å— 02: è¿ç®—ç¬¦

> ğŸ“– **å­¦ä¹ ç›®æ ‡**: æŒæ¡ JavaScript ä¸­çš„å„ç§è¿ç®—ç¬¦åŠå…¶ä½¿ç”¨åœºæ™¯

## ç›®å½•

1. [ç®—æœ¯è¿ç®—ç¬¦](#1-ç®—æœ¯è¿ç®—ç¬¦)
2. [æ¯”è¾ƒè¿ç®—ç¬¦](#2-æ¯”è¾ƒè¿ç®—ç¬¦)
3. [é€»è¾‘è¿ç®—ç¬¦](#3-é€»è¾‘è¿ç®—ç¬¦)
4. [ä½è¿ç®—ç¬¦](#4-ä½è¿ç®—ç¬¦)
5. [èµ‹å€¼è¿ç®—ç¬¦](#5-èµ‹å€¼è¿ç®—ç¬¦)
6. [ç°ä»£è¿ç®—ç¬¦](#6-ç°ä»£è¿ç®—ç¬¦)
7. [è¿ç®—ç¬¦ä¼˜å…ˆçº§](#7-è¿ç®—ç¬¦ä¼˜å…ˆçº§)

---

## 1. ç®—æœ¯è¿ç®—ç¬¦

### 1.1 åŸºæœ¬ç®—æœ¯è¿ç®—ç¬¦

```javascript
// åŠ æ³•
5 + 3;        // 8
"5" + 3;      // "53" (å­—ç¬¦ä¸²æ‹¼æ¥)

// å‡æ³•
5 - 3;        // 2
"5" - 3;      // 2 (å­—ç¬¦ä¸²è½¬æ•°å­—)

// ä¹˜æ³•
5 * 3;        // 15
"5" * 3;      // 15

// é™¤æ³•
10 / 2;       // 5
10 / 3;       // 3.333...
"10" / 2;     // 5

// å–æ¨¡ (ä½™æ•°)
10 % 3;       // 1
11 % 3;       // 2

// å¹‚è¿ç®— âœ… ES2016
2 ** 3;       // 8
10 ** -1;     // 0.1
// ç­‰åŒäº Math.pow(2, 3)

// ä¸€å…ƒåŠ å·
+"42";        // 42
+"hello";     // NaN

// ä¸€å…ƒå‡å·
-42;          // -42
-"42";        // -42

// é€’å¢/é€’å‡
let x = 5;
x++;          // 5 (è¿”å›åé€’å¢)
++x;          // 7 (å…ˆé€’å¢åè¿”å›)
x--;          // 7 (è¿”å›åé€’å‡)
--x;          // 5 (å…ˆé€’å‡åè¿”å›)
```

### 1.2 é€’å¢/é€’å‡çš„é™·é˜±

```javascript
// å‰ç¼€ vs åç¼€
let a = 5;
let b = a++;   // b=5, a=6 (å…ˆè¿”å›ï¼Œåé€’å¢)

let c = 5;
let d = ++c;   // d=6, c=6 (å…ˆé€’å¢ï¼Œåè¿”å›)

// åœ¨è¡¨è¾¾å¼ä¸­çš„ä½¿ç”¨
let i = 0;
arr[i++] = value;  // ä½¿ç”¨å½“å‰ç´¢å¼•ï¼Œç„¶åé€’å¢ âœ…
arr[++i] = value;  // å…ˆé€’å¢ç´¢å¼•ï¼Œç„¶åä½¿ç”¨ âš ï¸

// âš ï¸ é¿å…åœ¨å¤æ‚è¡¨è¾¾å¼ä¸­ä½¿ç”¨
// ä¸æ¨è:
let result = arr[x++] + arr[++x];  // æ··ä¹±!

// âœ… æ¨è:
let result = arr[x] + arr[x + 1];
x += 2;
```

---

## 2. æ¯”è¾ƒè¿ç®—ç¬¦

### 2.1 ç›¸ç­‰æ¯”è¾ƒ

```javascript
// ä¸¥æ ¼ç›¸ç­‰ âœ… **æ¨è**
5 === 5;          // true
5 === "5";        // false (ç±»å‹ä¸åŒ)
null === undefined; // false
NaN === NaN;      // false (ç‰¹æ®Š!)

// å®½æ¾ç›¸ç­‰ âš ï¸ **é¿å…ä½¿ç”¨**
5 == "5";         // true (ç±»å‹è½¬æ¢)
null == undefined; // true
0 == "";          // true
0 == "0";         // true
false == "0";     // true

// ä¸ç­‰
5 !== 5;          // false
5 !== "5";        // true

5 != 5;           // false
5 != "5";         // false

// Object.is() âœ… **æœ€ä¸¥æ ¼**
Object.is(5, 5);              // true
Object.is(NaN, NaN);          // true
Object.is(-0, 0);             // false
Object.is(null, undefined);   // false
```

### 2.2 å…³ç³»æ¯”è¾ƒ

```javascript
// å¤§äº/å°äº
5 > 3;           // true
5 >= 5;          // true
5 < 3;           // false
5 <= 5;          // true

// å­—ç¬¦ä¸²æ¯”è¾ƒ (æŒ‰å­—å…¸åº)
"a" < "b";       // true
"A" < "a";       // true (å¤§å†™å­—æ¯çš„ç¼–ç æ›´å°)
"10" < "2";      // true (æŒ‰å­—ç¬¦æ¯”è¾ƒï¼Œéæ•°å€¼)

// å­—ç¬¦ä¸²å’Œæ•°å­—æ¯”è¾ƒ
10 < "2";        // false (æ•°å­—æ¯”è¾ƒ)
"10" < 2;        // false (æ•°å­—æ¯”è¾ƒ)

// âš ï¸ NaN çš„ç‰¹æ®Šæ€§
NaN > 0;         // false
NaN < 0;         // false
NaN === NaN;     // false
// ä½¿ç”¨ Number.isNaN() æˆ– Object.is()
```

---

## 3. é€»è¾‘è¿ç®—ç¬¦

### 3.1 åŸºæœ¬é€»è¾‘è¿ç®—ç¬¦

```javascript
// é€»è¾‘ä¸ (AND)
true && true;    // true
true && false;   // false
false && true;   // false (çŸ­è·¯ï¼Œä¸è¯„ä¼°å³ä¾§)

// é€»è¾‘æˆ– (OR)
true || false;   // true
false || true;   // true
false || false;  // false

// é€»è¾‘é (NOT)
!true;           // false
!false;          // true
!0;              // true
!"hello";        // false
```

### 3.2 çŸ­è·¯æ±‚å€¼ âœ… **å¸¸ç”¨æŠ€å·§**

```javascript
// é€»è¾‘ä¸çŸ­è·¯ - å·¦ä¾§ä¸º falsy æ—¶è¿”å›å·¦ä¾§
false && "ä¸ä¼šæ‰§è¡Œ";    // false
true && "ä¼šæ‰§è¡Œ";       // "ä¼šæ‰§è¡Œ"
0 && "ä¸ä¼šæ‰§è¡Œ";       // 0
"hello" && "world";    // "world"

// å®é™…åº”ç”¨
function getName(user) {
  return user && user.name;  // å¦‚æœ user å­˜åœ¨ï¼Œè¿”å› name
}

// é€»è¾‘æˆ–çŸ­è·¯ - å·¦ä¾§ä¸º truthy æ—¶è¿”å›å·¦ä¾§
true || "ä¸ä¼šæ‰§è¡Œ";    // true
false || "ä¼šæ‰§è¡Œ";     // "ä¼šæ‰§è¡Œ"
0 || "é»˜è®¤å€¼";        // "é»˜è®¤å€¼"
"hello" || "world";   // "hello"

// å®é™…åº”ç”¨: é»˜è®¤å€¼ âœ…
function greet(name) {
  name = name || "Guest";  // å¦‚æœ name ä¸º falsyï¼Œä½¿ç”¨é»˜è®¤å€¼
  return `Hello, ${name}`;
}

// âš ï¸ æ³¨æ„ falsy å€¼çš„é—®é¢˜
0 || 10;          // 10 (ä½† 0 å¯èƒ½æ˜¯æœ‰æ•ˆå€¼)
"" || "default";  // "default"
```

### 3.3 ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ âœ… ES2020

```javascript
// ?? åªå¤„ç† null å’Œ undefined
null ?? "default";      // "default"
undefined ?? "default"; // "default"
0 ?? "default";         // 0 âœ…
"" ?? "default";        // "" âœ…
false ?? "default";     // false âœ…

// å®é™…åº”ç”¨
function getCount(count) {
  return count ?? 0;  // åªåœ¨ null/undefined æ—¶ä½¿ç”¨é»˜è®¤å€¼
}

getCount(0);        // 0 âœ…
getCount(null);     // 0 âœ…
getCount(undefined); // 0 âœ…

// ?? vs ||
const value = 0;
value || "default";   // "default" âš ï¸
value ?? "default";   // 0 âœ…

// âš ï¸ ä¸è¦ä¸ || æˆ– && ç›´æ¥æ··ç”¨
// null || undefined ?? "default";  // SyntaxError
// æ­£ç¡®åšæ³•:
(null || undefined) ?? "default";  // âœ…
```

### 3.4 é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦ âœ… ES2021

```javascript
// é€»è¾‘æˆ–èµ‹å€¼
let a = 0;
a ||= 10;        // a = a || 10 â†’ a = 10

let b = 5;
b ||= 10;        // b = b || 10 â†’ b = 5

// é€»è¾‘ä¸èµ‹å€¼
let c = 5;
c &&= 10;        // c = c && 10 â†’ c = 10

let d = 0;
d &&= 10;        // d = d && 10 â†’ d = 0

// ç©ºå€¼åˆå¹¶èµ‹å€¼
let e = null;
e ??= 10;        // e = e ?? 10 â†’ e = 10

let f = 0;
f ??= 10;        // f = f ?? 10 â†’ f = 0 âœ…
```

---

## 4. ä½è¿ç®—ç¬¦

### 4.1 åŸºæœ¬ä½è¿ç®—ç¬¦

```javascript
// æŒ‰ä½ä¸ (&)
5 & 3;           // 1
// 5 = 101
// 3 = 011
//     ---
//     001 = 1

// æŒ‰ä½æˆ– (|)
5 | 3;           // 7
// 5 = 101
// 3 = 011
//     ---
//     111 = 7

// æŒ‰ä½å¼‚æˆ– (^)
5 ^ 3;           // 6
// 5 = 101
// 3 = 011
//     ---
//     110 = 6

// æŒ‰ä½é (~)
~5;              // -6
// ~x = -(x + 1)

// å·¦ç§» (<<)
5 << 1;          // 10 (1010)
5 << 2;          // 20 (10100)

// å³ç§» (>>)
20 >> 2;         // 5
-20 >> 2;        // -5 (ç¬¦å·ä½ä¿ç•™)

// æ— ç¬¦å·å³ç§» (>>>)
-20 >>> 2;       // 1073741819 (ç¬¦å·ä½ä¸ä¿ç•™)
```

### 4.2 ä½è¿ç®—åº”ç”¨

```javascript
// æ£€æŸ¥å¥‡å¶
function isOdd(n) {
  return (n & 1) === 1;
}
isOdd(5);   // true
isOdd(4);   // false

// äº¤æ¢å˜é‡ (æ— éœ€ä¸´æ—¶å˜é‡)
let a = 5, b = 10;
a ^= b;
b ^= a;
a ^= b;
// a=10, b=5

// å¿«é€Ÿå–æ•´
~~3.14;         // 3
~~(-3.14);      // -3

// è®¾ç½®æ ‡å¿—ä½
const READ = 1;    // 001
const WRITE = 2;   // 010
const EXECUTE = 4; // 100

let permissions = READ | WRITE;  // 011
let canRead = (permissions & READ) !== 0;  // true
```

---

## 5. èµ‹å€¼è¿ç®—ç¬¦

### 5.1 åŸºæœ¬èµ‹å€¼

```javascript
// ç®€å•èµ‹å€¼
let x = 10;

// åŠ æ³•èµ‹å€¼
x += 5;          // x = x + 5

// å‡æ³•èµ‹å€¼
x -= 3;          // x = x - 3

// ä¹˜æ³•èµ‹å€¼
x *= 2;          // x = x * 2

// é™¤æ³•èµ‹å€¼
x /= 4;          // x = x / 4

// å–æ¨¡èµ‹å€¼
x %= 3;          // x = x % 3

// å¹‚è¿ç®—èµ‹å€¼ âœ…
x **= 2;         // x = x ** 2

// å·¦ç§»èµ‹å€¼
x <<= 2;         // x = x << 2

// å³ç§»èµ‹å€¼
x >>= 2;         // x = x >> 2
```

---

## 6. ç°ä»£è¿ç®—ç¬¦

### 6.1 å¯é€‰é“¾è¿ç®—ç¬¦ âœ… ES2020

```javascript
// å®‰å…¨è®¿é—®åµŒå¥—å±æ€§
const user = {
  profile: {
    name: "Alice"
  }
};

// ä¼ ç»Ÿæ–¹å¼ âš ï¸
const name1 = user.profile.name;              // å¯èƒ½æŠ¥é”™
const name2 = user && user.profile && user.profile.name;

// å¯é€‰é“¾ âœ…
const name3 = user?.profile?.name;            // "Alice"
const name4 = user?.address?.city;            // undefined

// è°ƒç”¨å¯é€‰æ–¹æ³•
const result = obj.method?.();                // å¦‚æœ method å­˜åœ¨åˆ™è°ƒç”¨

// æ•°ç»„å…ƒç´ 
const item = arr?.[0];                        // å¦‚æœ arr å­˜åœ¨åˆ™è®¿é—®

// å¤šæ¬¡å¯é€‰é“¾
const value = obj?.a?.b?.c;

// ä¸ç©ºå€¼åˆå¹¶é…åˆ âœ…
const city = user?.address?.city ?? "Unknown";

// åˆ é™¤å¯é€‰å±æ€§
delete user?.profile?.name;
```

### 6.2 è§£æ„èµ‹å€¼ âœ… **æ ¸å¿ƒç‰¹æ€§**

```javascript
// æ•°ç»„è§£æ„
const [a, b, c] = [1, 2, 3];  // a=1, b=2, c=3
const [first, second] = ["a", "b", "c"];  // first="a", second="b"

// è·³è¿‡å…ƒç´ 
const [x, , z] = [1, 2, 3];  // x=1, z=2

// å‰©ä½™å…ƒç´ 
const [head, ...tail] = [1, 2, 3, 4];  // head=1, tail=[2,3,4]

// é»˜è®¤å€¼
const [p = 10, q = 20] = [1];  // p=1, q=20

// äº¤æ¢å˜é‡ âœ…
let m = 1, n = 2;
[m, n] = [n, m];  // m=2, n=1

// å¯¹è±¡è§£æ„
const { name, age } = { name: "Alice", age: 30 };
// name="Alice", age=30

// é‡å‘½å
const { name: userName, age: userAge } = user;
// userName="Alice", userAge=30

// é»˜è®¤å€¼
const { x = 0, y = 0 } = { x: 10 };  // x=10, y=0

// åµŒå¥—è§£æ„
const user = {
  profile: {
    name: "Alice",
    address: {
      city: "NYC"
    }
  }
};
const { profile: { name, address: { city } } } = user;
// name="Alice", city="NYC"

// å‡½æ•°å‚æ•°è§£æ„ âœ…
function greet({ name, age = 25 }) {
  return `Hi ${name}, you're ${age}`;
}
greet({ name: "Bob" });  // "Hi Bob, you're 25"

// è§£æ„å‰©ä½™
const { a, b, ...rest } = { a: 1, b: 2, c: 3, d: 4 };
// a=1, b=2, rest={c:3, d:4}
```

### 6.3 å±•å¼€è¿ç®—ç¬¦ âœ…

```javascript
// æ•°ç»„å±•å¼€
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
const combined = [...arr1, ...arr2];  // [1,2,3,4,5,6]

// å¤åˆ¶æ•°ç»„
const copy = [...arr1];  // [1, 2, 3]

// åœ¨æ•°ç»„ä¸­æ’å…¥å…ƒç´ 
const withNew = [0, ...arr1, 4];  // [0,1,2,3,4]

// å¯¹è±¡å±•å¼€ âœ…
const obj1 = { a: 1, b: 2 };
const obj2 = { c: 3, d: 4 };
const merged = { ...obj1, ...obj2 };  // {a:1, b:2, c:3, d:4}

// è¦†ç›–å±æ€§
const updated = { ...obj1, b: 20 };  // {a:1, b:20}

// å‡½æ•°å‚æ•°å±•å¼€
function sum(a, b, c) {
  return a + b + c;
}
const nums = [1, 2, 3];
sum(...nums);  // 6

// Math.max/min
const max = Math.max(...arr);  // æœ€å¤§å€¼

// âš ï¸ æ³¨æ„: æµ…æ‹·è´
const original = { nested: { value: 1 } };
const shallow = { ...original };
shallow.nested.value = 2;
original.nested.value;  // 2 (è¢«å½±å“!)
```

---

## 7. è¿ç®—ç¬¦ä¼˜å…ˆçº§

### 7.1 ä¼˜å…ˆçº§è¡¨ (ä»é«˜åˆ°ä½)

| ä¼˜å…ˆçº§ | è¿ç®—ç¬¦ | ç»“åˆæ€§ |
|--------|--------|--------|
| 21 | `.` `[]` `()` `?.` | å·¦â†’å³ |
| 20 | `new` | å³â†’å·¦ |
| 19 | `++` `--` (åç¼€) | å·¦â†’å³ |
| 18 | `++` `--` (å‰ç¼€) `!` `~` `+` `-` `typeof` `void` `delete` | å³â†’å·¦ |
| 17 | `**` | å³â†’å·¦ |
| 16 | `*` `/` `%` | å·¦â†’å³ |
| 15 | `+` `-` | å·¦â†’å³ |
| 14 | `<<` `>>` `>>>` | å·¦â†’å³ |
| 13 | `<` `<=` `>` `>=` `in` `instanceof` | å·¦â†’å³ |
| 12 | `==` `!=` `===` `!==` | å·¦â†’å³ |
| 11 | `&` | å·¦â†’å³ |
| 10 | `^` | å·¦â†’å³ |
| 9 | `\|` | å·¦â†’å³ |
| 8 | `&&` | å·¦â†’å³ |
| 7 | `\|\|` `??` | å·¦â†’å³ |
| 6 | `? :` | å³â†’å·¦ |
| 5 | `=` `+=` `-=` ç­‰ | å³â†’å·¦ |
| 4 | `yield` | å³â†’å·¦ |
| 3 | `...` | å·¦â†’å³ |
| 2 | `,` | å·¦â†’å³ |

### 7.2 å¸¸è§ä¼˜å…ˆçº§é™·é˜±

```javascript
// âš ï¸ é™·é˜± 1: typeof
typeof null === "object";  // true (typeof ä¼˜å…ˆ)
// ç­‰åŒäº (typeof null) === "object"

// âš ï¸ é™·é˜± 2: ç›¸ç­‰ä¸é€»è¾‘æˆ–
const value = false || true && false;  // false
// && ä¼˜å…ˆçº§é«˜äº ||
// ç­‰åŒäº false || (true && false)

// âš ï¸ é™·é˜± 3: å¹‚è¿ç®—
2 ** 3 ** 2;  // 512 (å³ç»“åˆ)
// ç­‰åŒäº 2 ** (3 ** 2)

// âš ï¸ é™·é˜± 4: ä¸€å…ƒå‡å·ä¸å¹‚è¿ç®—
-2 ** 2;  // SyntaxError!
// å¿…é¡»ç”¨æ‹¬å·: -(2 ** 2) æˆ– (-2) ** 2

// âœ… ä½¿ç”¨æ‹¬å·æ˜ç¡®æ„å›¾
const result = (a + b) * c;
const flag = (x > 0) && (y < 10);
```

---

## 8. æœ€ä½³å®è·µ

### 8.1 è¿ç®—ç¬¦ä½¿ç”¨å»ºè®®

```javascript
// âœ… ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰
if (value === null) { }

// âŒ é¿å…å®½æ¾ç›¸ç­‰
if (value == null) { }  // ä¼šåŒ¹é… null å’Œ undefined

// âœ… ä½¿ç”¨ ?? å¤„ç†é»˜è®¤å€¼
const count = input ?? 0;

// âŒ é¿å…ä½¿ç”¨ || (ä¼šè¯¯åˆ¤ falsy å€¼)
const count = input || 0;  // 0 ä¼šè¢«æ›¿æ¢!

// âœ… ä½¿ç”¨å¯é€‰é“¾
const name = user?.profile?.name;

// âœ… ä½¿ç”¨è§£æ„èµ‹å€¼
const { name, age } = user;

// âœ… ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦
const copy = { ...original };
const combined = [...arr1, ...arr2];

// âœ… å¤æ‚è¡¨è¾¾å¼ä½¿ç”¨æ‹¬å·
const result = (a + b) * (c - d);
```

---

**ä¸‹ä¸€æ­¥**: å®Œæˆ `exercises/02-è¿ç®—ç¬¦/` ç›®å½•ä¸‹çš„ç»ƒä¹ é¢˜ ğŸš€
